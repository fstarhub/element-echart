<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0" />
        <link rel="icon" type="image/x-icon" href="static/favicon.ico" />
        <title>elementTest</title>
    </head>

    <body>
        <div id="app"></div>
        <!-- built files will be auto injected -->
        <script>
            // let objArray = [{a: 1}, {b: 2}, {c: 3}, {d: 4}, {e: 5}, {f: 6}, {g: 7}];
            // let len = objArray.length;
            // let n = 6; //假设每行显示4个
            // let lineNum = len % 6 === 0 ? len / 6 : Math.floor( (len / 6) + 1 );
            // let res = [];
            // for (let i = 0; i < lineNum; i++) {
            //     console.log(i*n,i*n+n )
            //     let temp = objArray.slice(i*n, i*n+n);
            //     res.push(JSON.parse(JSON.stringify(temp)));
            // }
            // console.log(res)


            // var arr=[1,2,[3],[5,[6,7]]]
            // console.log(arr instanceof Array)
            // var ary = arr.toString().replace(/(\[|\])/g, '')
            // console.log(ary)
            // function result (arr) {
            //     // var newArr=[]
            //     arr.forEach(element => {
            //         if((element instanceof Array)==false) {
            //             var newArr=newArr.push(element)
            //             console.log(newArr1)
            //             // var newArr2=newArr1.concat(newArr1)
            //             // console.log(newArr2)
            //         }else {
            //             console.log(element)
            //             result(element)
            //         }
            //     });
            //     return newArr
            // }
            // result(arr)

            // console.log(1)
            // async function async1() {
            //     console.log(2)
            //     async2()
            //     console.log(3)
            // }
            // async function async2() {
            //     console.log(4)
            // }
            // async1()
            // setTimeout(function(){
            //     console.log(5)
            // },0)
            // var p=new Promise((resolve ,reject)=>{
            //     console.log(6)
            //     resolve('resolve调用时传入的实参')
            //     console.log(10)
            // })
            // .then(
            //     (resolve)=>{console.log(7);console.log(resolve)}
            // )
            // console.log(8)

            // let arr = [
            //         ['前端','3人','8-15k','本科'],
            //         ['后端','5人','10-25k','研究生'],
            //         ['UI','2人','9-11k','大专'],
            //         ['ETL工程师','10人','6-12k','大专'],
            //         ];
                    // console.log(arr)
                    // function transformData (arr) {
                    //     var length=arr.length;
                    //     var index=arr[1].length
                    //     var newArr=[]
                    //     for(let i=0;i<length-1;i++){
                    //         newArr[i]=arr[i][i]
                            
                    //         console.log(newArr)

                            
                    //         // return newArr
                    //     }

                    // }
                    // transformData(arr)

                        // function foo(a){
                        //     var b=4;
                        //     return function fool(){
                        //         return a*b;
                        //     }
                        //     return 90
                        // }
                        // var result = foo(7);

                        // alert(result());
            var arr = [
                {
                    data: '2021',
                    list: [{id:1,cost:100,total:'123'},{id:1,cost:100,total:'ew李四'},{id:1,cost:'',total:'ewww'},{id:1,cost:6,total:'hhahaa'},]
                },
                {
                    data: '2021',
                    list: [{id:1,cost:100,total:'shai'},{id:1,cost:100,total:'zhangsan'},{id:1,cost:'',total:'4343'},{id:1,cost:null,total:'222'},]
                },
            ]
            var newArr = arr.filter(item => !item.list.some(el => el.cost === null || el.cost === '' ))
            // var newArr1 = arr.map(item =>{
            //     item.list.forEach((el, index) => {
            //         if (el.cost === null || el.cost === '') {
            //             item.list.splice(index,1)
            //         }
            //     })
            //     return item
            // })
            // var newArr1 = arr.map(item =>{
            //     item.list = item.list.filter((el, index) => {
            //         return el.cost != null && el.cost !=''
            //     })
            //     return item
            // })
            var newArr1 = arr.map(item =>{
                item.list = item.list.filter(el => el.cost != null && el.cost !='')
                return item
            })
            // console.log(newArr,newArr1, '----')
            var a = [
                { des: "qw", b: "reg", age: '1', name: 'eee'},
                { des: "vf", b: "fgdfd", age: '2', name: 'eee' },
                { des: "qw", b: "fdfd", age: '3', name: 'eee' },
                { des: "qw", b: "fdfd", age: '4', name: 'eee' },
                { des: "qw", b: "fdfd", age: '5', name: 'eee' },
                { des: "vf", b: "fdfd", age: 'e6', name: 'eee' },
                { des: "vf", b: "fdfd", age: '7', name: 'eee' },
                { des: "vf", b: "fdfd", age: '8', name: 'eee' },
                { des: "haha", b: "fdfd", age: '9', name: 'eee' },
                { des: "haha", b: "fdfd", age: '0', name: 'eee' },
            ];

            var map = a.reduce((all, m) => {
                let list = all.get(m.des);
                if (!list) {
                    list = [];
                    all.set(m.des, list);
                }
                list.push(m);
                return all;
            }, new Map());
          console.log(map,'map-----------')
            // Array.from(map.entries())
            //     // 这里过滤掉 list 只有一个元素的，剩下的就是有重复的
            //     .filter(([des, list]) => list.length > 1)
            //     .forEach(([des, list]) => {
            //         values = list.map(m => m.b);
            //         console.log(des, values, 'wode1111');
            //     });
        </script>
    </body>
</html>
